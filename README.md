# URRegistry

A swift package of UR Registry. It is a wrapper of `URRegistryFFI` which is generated by [ur-registry-rust](https://github.com/KeystoneHQ/ur-registry-rust)

## Installation

### Swift Package Manager

The [Swift Package Manager](https://swift.org/package-manager/) is a tool for automating the distribution of Swift code and is integrated into the `swift` compiler.  
To add `URRegistry` as a dependency to your Xcode project, select File > Add Packages and enter URL: `https://github.com/KeystoneHQ/ur-registry-ios.git`.

## How to update the binary library `URRegistryFFI`

1. Install Rust
https://www.rust-lang.org/learn/get-started

2. Clone the rust repo.

```shell
git clone https://github.com/KeystoneHQ/ur-registry-rust
cd ur-registry-rust
git submodule update --init
```

3. Install ios targets

```shell
rustup target add aarch64-apple-ios x86_64-apple-ios aarch64-apple-ios-sim
```

4. Generate XCFramework

Make sure the header file `ur-registry-rust/include/URRegistryFFI/lib_ur_registry_ffi.h` is up to date.

```shell
make generate_xcframework
```

5. Replace the `URRegistryFFI.xcframework` in `URRegistry/Library` from the `target` build folder
