# URRegistry

A swift package of UR Registry. It is a wrapper of `URRegistryFFI` which is generated by [ur-registry-rust](https://github.com/KeystoneHQ/ur-registry-rust)

## How to update the binary library `URRegistryFFI`

1. Clone the rust repo.

```shell
git clone https://github.com/KeystoneHQ/ur-registry-rust
```

2. Generate iOS static libraries, please install the dependent tools when needed.

```shell
cd ur-registry-rust

make generate_ios
```

3. Make sure the header file `ur-registry-rust/include/URRegistryFFI/lib_ur_registry_ffi.h` is up to date.

4. Generate `xcframework`.

```shell
xcodebuild -create-xcframework \
        -library "./target/aarch64-apple-ios/release/libur_registry_ffi.a" \
        -headers "./include" \
        -library "./target/x86_64-apple-ios/release/libur_registry_ffi.a" \
        -headers "./include" \
        -output "./URRegistryFFI.xcframework"
```

5. Replace the `URRegistryFFI.xcframework` in `URRegistry/Library`.